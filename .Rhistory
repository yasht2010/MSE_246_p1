#matrix_test[end_index+j,8]= df$GrossApproval[i]
#matrix_test[end_index+j,9]= df$BusinessType[i]
#matrix_test[end_index+j,10]= df$NaicsCode[i]
tempRow[1,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
#matrix_test[end_index+j,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
tempRow[1,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
#matrix_test[end_index+j,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
tempRow[1,15]=hpi_state[HPI_start_index+n,3]
#matrix_test[end_index+j,15]=hpi_state[HPI_start_index+n,3]
if(df$isDefault[i]==2){
tempRow[1,6]=stop
if((start+n)==stop){tempRow[1,13]=1}
#matrix_test[end_index+j,6]=stop
#matrix_test[end_index+periods,13]=1
}
else {tempRow[1,6]=2040} #matrix_test[end_index+j,6]= 2040
n=n+1
matrix_test <- rbind(matrix_test,tempRow)
}
}
else{
print("a")
for (j in 1:(2014-start)) {
tempRow = matrix(0,nrow=1,ncol=15)
tempRow[1,1] = i
#matrix_test[end_index+j,1]=i
#index_start=start-1989
tempRow[1,2]=start+n
tempRow[1,3]=start+n+1
tempRow[1,4]=interest_rates[start-1990+j]
tempRow[1,c(12,5,7,8,9)]= df_const[i]
#matrix_test[end_index+j,2]= start+n
#matrix_test[end_index+j,3]= start+n+1
#matrix_test[end_index+j,4]= interest_rates[start-1990+j]
#matrix_test[end_index+j,c(12,5,7,8,9)]= df_const[i]
#matrix_test[end_index+j,12]=df$SBLR[i]
#matrix_test[end_index+j,5]= df$isDefault[i]
#matrix_test[end_index+j,7]= df$ApprovalFiscalYear[i]
#matrix_test[end_index+j,8]= df$GrossApproval[i]
#matrix_test[end_index+j,9]= df$BusinessType[i]
#matrix_test[end_index+j,10]= df$NaicsCode[i]
tempRow[1,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
#matrix_test[end_index+j,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
tempRow[1,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
#matrix_test[end_index+j,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
tempRow[1,15]=hpi_state[HPI_start_index+n,3]
#matrix_test[end_index+j,15]=hpi_state[HPI_start_index+n,3]
if(df$isDefault[i]==2) {
tempRow[1,6]=stop
if((start+n)==stop){tempRow[1,13]=1}
#matrix_test[end_index+j,6]=stop
#matrix_test[end_index+periods,13]=1}
else {tempRow[1,6]=2040}# matrix_test[end_index+j,6]= 2040
n=n+1
matrix_test <- rbind(matrix_test,tempRow)
}
}
}
a=length(which(matrix_test[,1]==0))
end_index=length(matrix_test[,1])-a
#print(end_index)
if(nrow(matrix_test)>1000){
finalMatrix <- rbind(finalMatrix,matrix_test)
matrix_test=matrix(0,nrow=0,ncol=15)
}
}
finalMatrix=as.data.frame(finalMatrix)
View(finalMatrix)
plot(finalMatrix$`Loan Number`)
hist(finalMatrix$`Loan Number`)
a <- as.numeric(finalMatrix$`Loan Number`)
max(a)
plot(1:nrow(a),a)
hist(a)
# Initializing Matrix for Adding columns
matrix_test=matrix(0,nrow=0,ncol=15)
finalMatrix=matrix(0,nrow=0,ncol=15)
tempRow = matrix(0,nrow=1,ncol=15)
end_index=0
x=c("Loan Number","Start","Stop","Interest Rate","Default","Date of Loan Termination","ApprovalFiscalYear",
"GrossApproval","BusinessType","NaicsCode","UnemploymentRate","SBLR","DefaultTime","GDP Industry","HPI_state")
colnames(matrix_test)=x
df_const <- as.matrix(subset(df,select = c(SBLR,isDefault,ApprovalFiscalYear,
GrossApproval,BusinessType,NaicsCode)))
for (i in 1:11000) {
#print(i)
start=df$ApprovalFiscalYear[i]
stop=df$ApprovalFiscalYear[i]+round(df$dayselapsed[i]/365)
periods=length(start:stop)
n=0
unemployment_start_index=match(start,unemployment_data[1,])
unemployment_state_index=match(df$BorrState[i],unemployment_data[,3])
GDP_NAICS_index=match(df$Naics2digits[i],GDPSectorData[,2])
GDP_start_index=match(start,GDPSectorData[1,])
HPI_start_index=match(interaction(df$BorrState[i],start),
interaction(hpi_state$ProjectState, hpi_state$ApprovalFiscalYear))
if(stop<=2014){
for (j in 1:periods) {
tempRow = matrix(0,nrow=1,ncol=15)
tempRow[1,1]=i
#matrix_test[end_index+j,1]=i
#index_start=start-1989
tempRow[1,2]=start+n
tempRow[1,3]=start+n+1
#matrix_test[end_index+j,2]= start+n
#matrix_test[end_index+j,3]= start+n+1
tempRow[1,4] = interest_rates[start-1990+j]
#matrix_test[end_index+j,4]= interest_rates[start-1990+j]
tempRow[1,c(12,5,7,8,9,10)] = df_const[i,]
#matrix_test[end_index+j,c(12,5,7,8,9,10)]= df_const[i,]
#matrix_test[end_index+j,12]=df$SBLR[i]
#matrix_test[end_index+j,5]= df$isDefault[i]
#matrix_test[end_index+j,7]= df$ApprovalFiscalYear[i]
#matrix_test[end_index+j,8]= df$GrossApproval[i]
#matrix_test[end_index+j,9]= df$BusinessType[i]
#matrix_test[end_index+j,10]= df$NaicsCode[i]
tempRow[1,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
#matrix_test[end_index+j,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
tempRow[1,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
#matrix_test[end_index+j,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
tempRow[1,15]=hpi_state[HPI_start_index+n,3]
#matrix_test[end_index+j,15]=hpi_state[HPI_start_index+n,3]
if(df$isDefault[i]==2){
tempRow[1,6]=stop
if((start+n)==stop){tempRow[1,13]=1}
#matrix_test[end_index+j,6]=stop
#matrix_test[end_index+periods,13]=1
}
else {tempRow[1,6]=2040} #matrix_test[end_index+j,6]= 2040
n=n+1
matrix_test <- rbind(matrix_test,tempRow)
}
}
else{
print("a")
for (j in 1:(2014-start)) {
tempRow = matrix(0,nrow=1,ncol=15)
tempRow[1,1] = i
#matrix_test[end_index+j,1]=i
#index_start=start-1989
tempRow[1,2]=start+n
tempRow[1,3]=start+n+1
tempRow[1,4]=interest_rates[start-1990+j]
tempRow[1,c(12,5,7,8,9)]= df_const[i]
#matrix_test[end_index+j,2]= start+n
#matrix_test[end_index+j,3]= start+n+1
#matrix_test[end_index+j,4]= interest_rates[start-1990+j]
#matrix_test[end_index+j,c(12,5,7,8,9)]= df_const[i]
#matrix_test[end_index+j,12]=df$SBLR[i]
#matrix_test[end_index+j,5]= df$isDefault[i]
#matrix_test[end_index+j,7]= df$ApprovalFiscalYear[i]
#matrix_test[end_index+j,8]= df$GrossApproval[i]
#matrix_test[end_index+j,9]= df$BusinessType[i]
#matrix_test[end_index+j,10]= df$NaicsCode[i]
tempRow[1,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
#matrix_test[end_index+j,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
tempRow[1,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
#matrix_test[end_index+j,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
tempRow[1,15]=hpi_state[HPI_start_index+n,3]
#matrix_test[end_index+j,15]=hpi_state[HPI_start_index+n,3]
if(df$isDefault[i]==2) {
tempRow[1,6]=stop
if((start+n)==stop){tempRow[1,13]=1}
#matrix_test[end_index+j,6]=stop
#matrix_test[end_index+periods,13]=1}
else {tempRow[1,6]=2040}# matrix_test[end_index+j,6]= 2040
n=n+1
matrix_test <- rbind(matrix_test,tempRow)
}
}
}
a=length(which(matrix_test[,1]==0))
end_index=length(matrix_test[,1])-a
#print(end_index)
if(nrow(matrix_test)>1000){
finalMatrix <- rbind(finalMatrix,matrix_test)
matrix_test=matrix(0,nrow=0,ncol=15)
}
}
finalMatrix=as.data.frame(finalMatrix)
hist(finalMatrix$`Loan Number`)
hist(as.numeric(finalMatrix$`Loan Number`))
a <- unique(as.numeric(finalMatrix$`Loan Number`))
hist(a)
max(a)
# Initializing Matrix for Adding columns
matrix_test=matrix(0,nrow=0,ncol=15)
finalMatrix=matrix(0,nrow=0,ncol=15)
tempRow = matrix(0,nrow=1,ncol=15)
end_index=0
x=c("Loan Number","Start","Stop","Interest Rate","Default","Date of Loan Termination","ApprovalFiscalYear",
"GrossApproval","BusinessType","NaicsCode","UnemploymentRate","SBLR","DefaultTime","GDP Industry","HPI_state")
colnames(matrix_test)=x
df_const <- as.matrix(subset(df,select = c(SBLR,isDefault,ApprovalFiscalYear,
GrossApproval,BusinessType,NaicsCode)))
for (i in 1:11000) {
#print(i)
start=df$ApprovalFiscalYear[i]
stop=df$ApprovalFiscalYear[i]+round(df$dayselapsed[i]/365)
periods=length(start:stop)
n=0
unemployment_start_index=match(start,unemployment_data[1,])
unemployment_state_index=match(df$BorrState[i],unemployment_data[,3])
GDP_NAICS_index=match(df$Naics2digits[i],GDPSectorData[,2])
GDP_start_index=match(start,GDPSectorData[1,])
HPI_start_index=match(interaction(df$BorrState[i],start),
interaction(hpi_state$ProjectState, hpi_state$ApprovalFiscalYear))
if(stop<=2014){
for (j in 1:periods) {
tempRow = matrix(0,nrow=1,ncol=15)
tempRow[1,1]=i
#matrix_test[end_index+j,1]=i
#index_start=start-1989
tempRow[1,2]=start+n
tempRow[1,3]=start+n+1
#matrix_test[end_index+j,2]= start+n
#matrix_test[end_index+j,3]= start+n+1
tempRow[1,4] = interest_rates[start-1990+j]
#matrix_test[end_index+j,4]= interest_rates[start-1990+j]
tempRow[1,c(12,5,7,8,9,10)] = df_const[i,]
#matrix_test[end_index+j,c(12,5,7,8,9,10)]= df_const[i,]
#matrix_test[end_index+j,12]=df$SBLR[i]
#matrix_test[end_index+j,5]= df$isDefault[i]
#matrix_test[end_index+j,7]= df$ApprovalFiscalYear[i]
#matrix_test[end_index+j,8]= df$GrossApproval[i]
#matrix_test[end_index+j,9]= df$BusinessType[i]
#matrix_test[end_index+j,10]= df$NaicsCode[i]
tempRow[1,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
#matrix_test[end_index+j,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
tempRow[1,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
#matrix_test[end_index+j,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
tempRow[1,15]=hpi_state[HPI_start_index+n,3]
#matrix_test[end_index+j,15]=hpi_state[HPI_start_index+n,3]
if(df$isDefault[i]==2){
tempRow[1,6]=stop
if((start+n)==stop){tempRow[1,13]=1}
#matrix_test[end_index+j,6]=stop
#matrix_test[end_index+periods,13]=1
}
else {tempRow[1,6]=2040} #matrix_test[end_index+j,6]= 2040
n=n+1
matrix_test <- rbind(matrix_test,tempRow)
}
}
else{
print("a")
for (j in 1:(2014-start)) {
tempRow = matrix(0,nrow=1,ncol=15)
tempRow[1,1] = i
#matrix_test[end_index+j,1]=i
#index_start=start-1989
tempRow[1,2]=start+n
tempRow[1,3]=start+n+1
tempRow[1,4]=interest_rates[start-1990+j]
tempRow[1,c(12,5,7,8,9)]= df_const[i]
#matrix_test[end_index+j,2]= start+n
#matrix_test[end_index+j,3]= start+n+1
#matrix_test[end_index+j,4]= interest_rates[start-1990+j]
#matrix_test[end_index+j,c(12,5,7,8,9)]= df_const[i]
#matrix_test[end_index+j,12]=df$SBLR[i]
#matrix_test[end_index+j,5]= df$isDefault[i]
#matrix_test[end_index+j,7]= df$ApprovalFiscalYear[i]
#matrix_test[end_index+j,8]= df$GrossApproval[i]
#matrix_test[end_index+j,9]= df$BusinessType[i]
#matrix_test[end_index+j,10]= df$NaicsCode[i]
tempRow[1,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
#matrix_test[end_index+j,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
tempRow[1,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
#matrix_test[end_index+j,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
tempRow[1,15]=hpi_state[HPI_start_index+n,3]
#matrix_test[end_index+j,15]=hpi_state[HPI_start_index+n,3]
if(df$isDefault[i]==2) {
tempRow[1,6]=stop
if((start+n)==stop){tempRow[1,13]=1}
#matrix_test[end_index+j,6]=stop
#matrix_test[end_index+periods,13]=1}
else {tempRow[1,6]=2040}# matrix_test[end_index+j,6]= 2040
n=n+1
matrix_test <- rbind(matrix_test,tempRow)
}
}
}
a=length(which(matrix_test[,1]==0))
end_index=length(matrix_test[,1])-a
#print(end_index)
if(nrow(matrix_test)>1000){
finalMatrix <- rbind(finalMatrix,matrix_test)
matrix_test=matrix(0,nrow=0,ncol=15)
}
}
finalMatrix <- rbind(finalMatrix,matrix_test)
finalMatrix=as.data.frame(finalMatrix)
a <- unique(as.numeric(finalMatrix$`Loan Number`))
hist(a)
max(a)
# Initializing Matrix for Adding columns
matrix_test=matrix(0,nrow=0,ncol=15)
finalMatrix=matrix(0,nrow=0,ncol=15)
tempRow = matrix(0,nrow=1,ncol=15)
end_index=0
x=c("Loan Number","Start","Stop","Interest Rate","Default","Date of Loan Termination","ApprovalFiscalYear",
"GrossApproval","BusinessType","NaicsCode","UnemploymentRate","SBLR","DefaultTime","GDP Industry","HPI_state")
colnames(matrix_test)=x
df_const <- as.matrix(subset(df,select = c(SBLR,isDefault,ApprovalFiscalYear,
GrossApproval,BusinessType,NaicsCode)))
for (i in 1:11000) {
#print(i)
start=df$ApprovalFiscalYear[i]
stop=df$ApprovalFiscalYear[i]+round(df$dayselapsed[i]/365)
periods=length(start:stop)
n=0
unemployment_start_index=match(start,unemployment_data[1,])
unemployment_state_index=match(df$BorrState[i],unemployment_data[,3])
GDP_NAICS_index=match(df$Naics2digits[i],GDPSectorData[,2])
GDP_start_index=match(start,GDPSectorData[1,])
HPI_start_index=match(interaction(df$BorrState[i],start),
interaction(hpi_state$ProjectState, hpi_state$ApprovalFiscalYear))
if(stop<=2014){
for (j in 1:periods) {
tempRow = matrix(0,nrow=1,ncol=15)
tempRow[1,1]=i
#matrix_test[end_index+j,1]=i
#index_start=start-1989
tempRow[1,2]=start+n
tempRow[1,3]=start+n+1
#matrix_test[end_index+j,2]= start+n
#matrix_test[end_index+j,3]= start+n+1
tempRow[1,4] = interest_rates[start-1990+j]
#matrix_test[end_index+j,4]= interest_rates[start-1990+j]
tempRow[1,c(12,5,7,8,9,10)] = df_const[i,]
#matrix_test[end_index+j,c(12,5,7,8,9,10)]= df_const[i,]
#matrix_test[end_index+j,12]=df$SBLR[i]
#matrix_test[end_index+j,5]= df$isDefault[i]
#matrix_test[end_index+j,7]= df$ApprovalFiscalYear[i]
#matrix_test[end_index+j,8]= df$GrossApproval[i]
#matrix_test[end_index+j,9]= df$BusinessType[i]
#matrix_test[end_index+j,10]= df$NaicsCode[i]
tempRow[1,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
#matrix_test[end_index+j,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
tempRow[1,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
#matrix_test[end_index+j,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
tempRow[1,15]=hpi_state[HPI_start_index+n,3]
#matrix_test[end_index+j,15]=hpi_state[HPI_start_index+n,3]
if(df$isDefault[i]==2){
tempRow[1,6]=stop
if((start+n)==stop){tempRow[1,13]=1}
#matrix_test[end_index+j,6]=stop
#matrix_test[end_index+periods,13]=1
}
else {tempRow[1,6]=2040} #matrix_test[end_index+j,6]= 2040
n=n+1
matrix_test <- rbind(matrix_test,tempRow)
}
}
else{
print("a")
for (j in 1:(2014-start)) {
tempRow = matrix(0,nrow=1,ncol=15)
tempRow[1,1] = i
#matrix_test[end_index+j,1]=i
#index_start=start-1989
tempRow[1,2]=start+n
tempRow[1,3]=start+n+1
tempRow[1,4]=interest_rates[start-1990+j]
tempRow[1,c(12,5,7,8,9)]= df_const[i]
#matrix_test[end_index+j,2]= start+n
#matrix_test[end_index+j,3]= start+n+1
#matrix_test[end_index+j,4]= interest_rates[start-1990+j]
#matrix_test[end_index+j,c(12,5,7,8,9)]= df_const[i]
#matrix_test[end_index+j,12]=df$SBLR[i]
#matrix_test[end_index+j,5]= df$isDefault[i]
#matrix_test[end_index+j,7]= df$ApprovalFiscalYear[i]
#matrix_test[end_index+j,8]= df$GrossApproval[i]
#matrix_test[end_index+j,9]= df$BusinessType[i]
#matrix_test[end_index+j,10]= df$NaicsCode[i]
tempRow[1,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
#matrix_test[end_index+j,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
tempRow[1,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
#matrix_test[end_index+j,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
tempRow[1,15]=hpi_state[HPI_start_index+n,3]
#matrix_test[end_index+j,15]=hpi_state[HPI_start_index+n,3]
if(df$isDefault[i]==2) {
tempRow[1,6]=stop
if((start+n)==stop){tempRow[1,13]=1}
#matrix_test[end_index+j,6]=stop
#matrix_test[end_index+periods,13]=1}
else {tempRow[1,6]=2040}# matrix_test[end_index+j,6]= 2040
n=n+1
matrix_test <- rbind(matrix_test,tempRow)
}
}
}
a=length(which(matrix_test[,1]==0))
end_index=length(matrix_test[,1])-a
#print(end_index)
if(nrow(matrix_test)>=500){
finalMatrix <- rbind(finalMatrix,matrix_test)
matrix_test=matrix(0,nrow=0,ncol=15)
}
}
finalMatrix <- rbind(finalMatrix,matrix_test)
finalMatrix=as.data.frame(finalMatrix)
a <- unique(as.numeric(finalMatrix$`Loan Number`))
hist(a)
max(a)
matrix_test
nrow(matrix_test)
# Initializing Matrix for Adding columns
matrix_test=matrix(0,nrow=0,ncol=15)
finalMatrix=matrix(0,nrow=0,ncol=15)
tempRow = matrix(0,nrow=1,ncol=15)
end_index=0
x=c("Loan Number","Start","Stop","Interest Rate","Default","Date of Loan Termination","ApprovalFiscalYear",
"GrossApproval","BusinessType","NaicsCode","UnemploymentRate","SBLR","DefaultTime","GDP Industry","HPI_state")
colnames(matrix_test)=x
df_const <- as.matrix(subset(df,select = c(SBLR,isDefault,ApprovalFiscalYear,
GrossApproval,BusinessType,NaicsCode)))
for (i in 1:11000) {
#print(i)
start=df$ApprovalFiscalYear[i]
stop=df$ApprovalFiscalYear[i]+round(df$dayselapsed[i]/365)
periods=length(start:stop)
n=0
unemployment_start_index=match(start,unemployment_data[1,])
unemployment_state_index=match(df$BorrState[i],unemployment_data[,3])
GDP_NAICS_index=match(df$Naics2digits[i],GDPSectorData[,2])
GDP_start_index=match(start,GDPSectorData[1,])
HPI_start_index=match(interaction(df$BorrState[i],start),
interaction(hpi_state$ProjectState, hpi_state$ApprovalFiscalYear))
if(stop<=2014){
for (j in 1:periods) {
tempRow = matrix(0,nrow=1,ncol=15)
tempRow[1,1]=i
#matrix_test[end_index+j,1]=i
#index_start=start-1989
tempRow[1,2]=start+n
tempRow[1,3]=start+n+1
#matrix_test[end_index+j,2]= start+n
#matrix_test[end_index+j,3]= start+n+1
tempRow[1,4] = interest_rates[start-1990+j]
#matrix_test[end_index+j,4]= interest_rates[start-1990+j]
tempRow[1,c(12,5,7,8,9,10)] = df_const[i,]
#matrix_test[end_index+j,c(12,5,7,8,9,10)]= df_const[i,]
#matrix_test[end_index+j,12]=df$SBLR[i]
#matrix_test[end_index+j,5]= df$isDefault[i]
#matrix_test[end_index+j,7]= df$ApprovalFiscalYear[i]
#matrix_test[end_index+j,8]= df$GrossApproval[i]
#matrix_test[end_index+j,9]= df$BusinessType[i]
#matrix_test[end_index+j,10]= df$NaicsCode[i]
tempRow[1,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
#matrix_test[end_index+j,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
tempRow[1,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
#matrix_test[end_index+j,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
tempRow[1,15]=hpi_state[HPI_start_index+n,3]
#matrix_test[end_index+j,15]=hpi_state[HPI_start_index+n,3]
if(df$isDefault[i]==2){
tempRow[1,6]=stop
if((start+n)==stop){tempRow[1,13]=1}
#matrix_test[end_index+j,6]=stop
#matrix_test[end_index+periods,13]=1
}
else {tempRow[1,6]=2040} #matrix_test[end_index+j,6]= 2040
n=n+1
matrix_test <- rbind(matrix_test,tempRow)
}
}
else{
print("a")
for (j in 1:(2014-start)) {
tempRow = matrix(0,nrow=1,ncol=15)
tempRow[1,1] = i
#matrix_test[end_index+j,1]=i
#index_start=start-1989
tempRow[1,2]=start+n
tempRow[1,3]=start+n+1
tempRow[1,4]=interest_rates[start-1990+j]
tempRow[1,c(12,5,7,8,9)]= df_const[i]
#matrix_test[end_index+j,2]= start+n
#matrix_test[end_index+j,3]= start+n+1
#matrix_test[end_index+j,4]= interest_rates[start-1990+j]
#matrix_test[end_index+j,c(12,5,7,8,9)]= df_const[i]
#matrix_test[end_index+j,12]=df$SBLR[i]
#matrix_test[end_index+j,5]= df$isDefault[i]
#matrix_test[end_index+j,7]= df$ApprovalFiscalYear[i]
#matrix_test[end_index+j,8]= df$GrossApproval[i]
#matrix_test[end_index+j,9]= df$BusinessType[i]
#matrix_test[end_index+j,10]= df$NaicsCode[i]
tempRow[1,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
#matrix_test[end_index+j,11]=unemployment_data[unemployment_state_index,unemployment_start_index+n]
tempRow[1,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
#matrix_test[end_index+j,14]=GDPSectorData[GDP_NAICS_index,GDP_start_index+n]
tempRow[1,15]=hpi_state[HPI_start_index+n,3]
#matrix_test[end_index+j,15]=hpi_state[HPI_start_index+n,3]
if(df$isDefault[i]==2) {
tempRow[1,6]=stop
if((start+n)==stop){tempRow[1,13]=1}
#matrix_test[end_index+j,6]=stop
#matrix_test[end_index+periods,13]=1}
else {tempRow[1,6]=2040}# matrix_test[end_index+j,6]= 2040
n=n+1
matrix_test <- rbind(matrix_test,tempRow)
}
}
}
a=length(which(matrix_test[,1]==0))
end_index=length(matrix_test[,1])-a
#print(end_index)
if(i%%1000==0){
finalMatrix <- rbind(finalMatrix,matrix_test)
matrix_test=matrix(0,nrow=0,ncol=15)
}
}
